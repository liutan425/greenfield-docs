<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-guide/storage-provider/run-book/piece-store">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">How to deploy Piece Store | BNB Greenfield</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://bnb-chain.github.io/greenfield-docs/docs/guide/storage-provider/run-book/piece-store"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="How to deploy Piece Store | BNB Greenfield"><meta data-rh="true" name="description" content="Greenfield SP is a storage infrastructure for Greenfield decentralized storgage platform. Greenfield SP uses PieceStore to store users&#x27; payload data."><meta data-rh="true" property="og:description" content="Greenfield SP is a storage infrastructure for Greenfield decentralized storgage platform. Greenfield SP uses PieceStore to store users&#x27; payload data."><link data-rh="true" rel="icon" href="/greenfield-docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://bnb-chain.github.io/greenfield-docs/docs/guide/storage-provider/run-book/piece-store"><link data-rh="true" rel="alternate" href="https://bnb-chain.github.io/greenfield-docs/docs/guide/storage-provider/run-book/piece-store" hreflang="en"><link data-rh="true" rel="alternate" href="https://bnb-chain.github.io/greenfield-docs/docs/guide/storage-provider/run-book/piece-store" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://3LF005YNGZ-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/greenfield-docs/blog/rss.xml" title="BNB Greenfield RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/greenfield-docs/blog/atom.xml" title="BNB Greenfield Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="BNB Greenfield" href="/greenfield-docs/opensearch.xml"><link rel="stylesheet" href="/greenfield-docs/assets/css/styles.52c35f0a.css">
<link rel="preload" href="/greenfield-docs/assets/js/runtime~main.32796be0.js" as="script">
<link rel="preload" href="/greenfield-docs/assets/js/main.42297291.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/greenfield-docs/"><div class="navbar__logo"><img src="/greenfield-docs/img/logo.svg" alt="Greenfield Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/greenfield-docs/img/logo.svg" alt="Greenfield Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">BNB Greenfield</b></a><a class="navbar__item navbar__link" href="/greenfield-docs/docs/guide/introduction/overview">Guide</a><a class="navbar__item navbar__link" href="/greenfield-docs/docs/tutorials/overview">Tutorials</a><a class="navbar__item navbar__link" href="/greenfield-docs/docs/api/endpoints">API &amp; SDK</a><a class="navbar__item navbar__link" href="/greenfield-docs/docs/release-notes/releaseNotes">Releases</a><a class="navbar__item navbar__link" href="/greenfield-docs/docs/faq/greenfield-faqs">FAQs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/bnb-chain/greenfield-docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/greenfield-docs/docs/guide/home">Introduction</a><button aria-label="Toggle the collapsible sidebar category &#x27;Introduction&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/greenfield-docs/docs/guide/getting-started/overview">Getting Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/greenfield-docs/docs/guide/core-concept/accounts">Core Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/greenfield-docs/docs/guide/greenfield-blockchain/overview">Greenfield Blockchain</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/greenfield-docs/docs/guide/storage-provider/introduction/overview">Storage Provider</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/greenfield-docs/docs/guide/storage-provider/introduction/overview">Overview</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/greenfield-docs/docs/guide/storage-provider/modules/gateway">Modules</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/greenfield-docs/docs/guide/storage-provider/run-book/compile-dependences">Run Storage Provider</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/greenfield-docs/docs/guide/storage-provider/run-book/compile-dependences">SP Compiling and Dependencies</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/greenfield-docs/docs/guide/storage-provider/run-book/run-local-SP-network">Run Local SP Network</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/greenfield-docs/docs/guide/storage-provider/run-book/run-SP-node">Run SP Node</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/greenfield-docs/docs/guide/storage-provider/run-book/join-SP-network">Join Greenfield SP Network</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/greenfield-docs/docs/guide/storage-provider/run-book/piece-store">How to deploy Piece Store</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/greenfield-docs/docs/guide/storage-provider/run-book/config">SP Config</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/greenfield-docs/docs/guide/storage-provider/run-book/common-issues">SP Common Issues</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/greenfield-docs/docs/contribute">Contribute</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://github.com/bnb-chain/greenfield-whitepaper" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK">Whitepaper<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_BDYx"><div class="docItemContainer_oq1c"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/greenfield-docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Storage Provider</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Run Storage Provider</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">How to deploy Piece Store</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>How to deploy Piece Store</h1></header><div class="row"><div class="col col--12"><p>Greenfield SP is a storage infrastructure for Greenfield decentralized storgage platform. Greenfield SP uses <code>PieceStore</code> to store users&#x27; payload data.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="piecestore-config">PieceStore Config<a class="hash-link" href="#piecestore-config" title="Direct link to heading">​</a></h2><p>When creating a PieceStore, there are the following options to configure underlying storage:</p><div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[PieceStore]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># required</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Shards = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[PieceStore.Store]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># required</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Storage = &#x27;&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BucketURL = &#x27;&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MaxRetries = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MinRetryDelay = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TLSInsecureSkipVerify = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># required</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">IAMType = &#x27;&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><code>Storage</code>: Specify the underlying storage to be used by PieceStore, e.g. <code>Storage = &#x27;s3&#x27;</code>.</li><li><code>BucketURL</code>: Specify the underlying storage access address, e.g. <code>BucketURL = &#x27;https://mybucket.s3.us-ease-1.amazonaws.com&#x27;</code>. Safer way sets bucket url via environment variable, e.g. <code>export BUCKET_URL=https://mybucket.s3.us-ease-1.amazonaws.com</code>.</li><li><code>MaxRetries</code>: Specify the max retry count when there are something worong doing an operation on the underlying storage, e.g. <code>MaxRetries = 3</code>.</li><li><code>MinRetryDelay</code>: Specify the min retry delay when there are something worong doing an operation on the underlying storage, e.g. <code>MinRetryDelay = 10</code>.</li><li><code>TLSInsecureSkipVerify</code>: Specify whether you disable <code>HTTPS</code> when sending <code>HTTP</code> requests, e.g. <code>TLSInsecureSkipVerify = false</code>.</li><li><code>IAMType</code>: Specify which authentication you will use to access the uderlying storage, e.g. <code>IAMType = &#x27;AKSK&#x27;</code>.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="shards">Shards<a class="hash-link" href="#shards" title="Direct link to heading">​</a></h2><p>When creating a PieceStore, multiple buckets can be defined as the underlying storgae through the <code>Shards</code> option. Based on the sharding, SP can distribute the files to multiple buckets according to the hashed value of the file name. Data sharding technology can distribute the load of concurrent writing of large-scale data to multiple buckets, thereby improving the writing performance.</p><p>The following are points to note when using the data sharding function:</p><ul><li>The <code>Shards</code> option accepts an integer between 0 and 256, indicating how many Buckets the files will be scattered into. The default value is 0, indicating that the data sharding function is not enabled.</li><li>Only multiple buckets under the same object storage can be used.</li><li>The integer wildcard <code>%d</code> needs to be used to specify the buckets, for example, <code>http://10.180.42.161:9000%d</code>. Buckets can be created automatically by SP when creating PieceStore.</li><li>The data sharding is set at the time of creation and cannot be modified after creation. You cannot increase or decrease the number of buckets, nor cancel the shards function.</li></ul><p>For example, the following config creates PieceStore with 5 shards.</p><div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[PieceStore]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Shards = 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[PieceStore.Store]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Storage = &#x27;minio&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BucketURL = &#x27;http://10.180.42.161:9000/mybucket%d&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">IAMType = &#x27;AKSK&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>After SP initialized through the above command, PieceStore will create 5 buckets named <code>mybucket0</code>, <code>mybucket1</code>, <code>mybucket2</code>, <code>mybucket3</code> and <code>mybucket4</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="iamtype">IAMType<a class="hash-link" href="#iamtype" title="Direct link to heading">​</a></h2><p>PieceStore supports two authentication modes: <code>AKSK</code> and <code>SA</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="aksk">AKSK<a class="hash-link" href="#aksk" title="Direct link to heading">​</a></h3><p>In <code>AKSK</code> mode, PieceStore will access object storage by using <code>AccessKeyID</code> and <code>AccessKeySecret</code>. If users use s3 as object storage, you can set <code>AWSAccessKey</code> and <code>AWS_SECRET_KEY</code> into environment variables which are more secure.</p><p>Permanent access credentials generally have two parts, Access Key, Secret Key, while temporary access credentials generally include three parts, Access Key, Secret Key and token, and temporary access credentials have an expiration time, usually between a few minutes and a few hours.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sa">SA<a class="hash-link" href="#sa" title="Direct link to heading">​</a></h3><p>Service Account (abbreviated as SA) is a more secure way for object storage system to authenticate users. In this mode, you needn&#x27;t to provide <code>AccessKeyID</code> and <code>AccessKeySecret</code>. If you deploy your SP in Kubernetes, we recommend you using SA to access object storage. AWS S3 can read this <a href="https://docs.aws.amazon.com/eks/latest/userguide/service-accounts.html" target="_blank" rel="noopener noreferrer">documentation</a> to learn how to use SA. Alibaba Cloud OSS uses <code>OIDC</code> to visit OSS safely which users don&#x27;t need to provide <code>AccessKeyID</code> and <code>AccessKeySecret</code>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-get-temporary-credentials">How to get temporary credentials<a class="hash-link" href="#how-to-get-temporary-credentials" title="Direct link to heading">​</a></h4><p>Different cloud vendors have different acquisition methods. Generally, the Access Key, Secret Key and ARN representing the permission boundary of the temporary access credential are required as parameters to request access to the STS server of the cloud service vendor to obtain the temporary access credential. This process can generally be simplified by the SDK provided by the cloud vendor. For example, Amazon S3 can refer to this <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp_request.html" target="_blank" rel="noopener noreferrer">link</a> to obtain temporary credentials, and Alibaba Cloud OSS can refer to this <a href="https://www.alibabacloud.com/help/en/object-storage-service/latest/use-a-temporary-credential-provided-by-sts-to-access-oss" target="_blank" rel="noopener noreferrer">link</a>.</p><p>Temporary credentials are also set into environment variables such as s3 by <code>AWS_SESSION_TOKEN</code>, minio by <code>MINIO_SESSION_TOKEN</code> and so on. Due to there is an expiration time in temporary credentials, this is used in test mode.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="supported-storage-type">Supported Storage Type<a class="hash-link" href="#supported-storage-type" title="Direct link to heading">​</a></h2><p>PieceStore now supports the following storage system. If the listed storage systems don&#x27;t conatin that you want to use, feel free to submit a requirement <a href="https://github.com/bnb-chain/greenfield-storage-provider/issues" target="_blank" rel="noopener noreferrer">issue</a>.</p><table><thead><tr><th>Name</th><th>value</th></tr></thead><tbody><tr><td><a href="#amazon-s3">Amazon S3</a></td><td><code>s3</code></td></tr><tr><td><a href="#alibaba-cloud-oss">Alibaba Cloud OSS</a></td><td><code>oss</code></td></tr><tr><td><a href="#backblaze-b2">Backblaze B2</a></td><td><code>b2</code></td></tr><tr><td><a href="#minio">MinIO</a></td><td><code>minio</code></td></tr><tr><td><a href="#file">File</a></td><td><code>file</code></td></tr><tr><td><a href="#memory">Memory</a></td><td><code>memory</code></td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="amazon-s3">Amazon S3<a class="hash-link" href="#amazon-s3" title="Direct link to heading">​</a></h3><p>S3 supports <a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/VirtualHosting.html" target="_blank" rel="noopener noreferrer">two styles of endpoint URI</a>: virtual hosted-style and path-style. The differences are:</p><ul><li>Virtual-hosted-style: <code>https://&lt;bucket&gt;.s3.&lt;region&gt;.amazonaws.com</code></li><li>Path-style: <code>https://s3.&lt;region&gt;.amazonaws.com/&lt;bucket&gt;</code></li></ul><p>The <code>&lt;region&gt;</code> should be replaced with specific region code, e.g. the region code of US East (N. Virginia) is <code>us-east-1</code>. All the available region codes can be found <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-regions-availability-zones.html#concepts-available-regions" target="_blank" rel="noopener noreferrer">here</a>. If you use s3 as the underlying storage, you can set <code>Storage = s3</code> in config.toml.</p><p>AWS S3 <code>AKSK</code> environment variables as follows:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// AWS_ACCESS_KEY defines </span><span class="token function" style="color:#d73a49">env</span><span class="token plain"> variable name </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> aws access key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">AWS_ACCESS_KEY</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;your_access_key&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// AWS_SECRET_KEY defines </span><span class="token function" style="color:#d73a49">env</span><span class="token plain"> variable name </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> aws secret key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">AWS_SECRET_KEY</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;your_secret_key&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// AWS_SESSION_TOKEN defines </span><span class="token function" style="color:#d73a49">env</span><span class="token plain"> variable name </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> aws session token, this is optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">AWS_SESSION_TOKEN</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;your_session_token&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>AWS S3 <code>SA</code> environment variables as follows:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// AWS_ROLE_ARN defines </span><span class="token function" style="color:#d73a49">env</span><span class="token plain"> variable </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> aws role arnv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">AWS_ROLE_ARN</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;your_role_arn&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// AWSSecretKey defines </span><span class="token function" style="color:#d73a49">env</span><span class="token plain"> variable name </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> aws web identity token </span><span class="token function" style="color:#d73a49">file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">AWS_WEB_IDENTITY_TOKEN_FILE</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;your_web_identity_token_file&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>If the S3 bucket has public access (anonymous access is supported), please set <code>export AWS_ACCESS_KEY=&quot;NoSignRequest&quot;</code>.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="alibaba-cloud-oss">Alibaba Cloud OSS<a class="hash-link" href="#alibaba-cloud-oss" title="Direct link to heading">​</a></h3><p>Please follow this <a href="https://www.alibabacloud.com/help/en/basics-for-beginners/latest/obtain-an-accesskey-pair" target="_blank" rel="noopener noreferrer">document</a> to learn how to get access key and secret key. Alibaba Cloud also supports using Security Token Service (STS) to authorize temporary access to OSS. If you use OSS as the underlying storage, you can set <code>Storage = oss</code> in config.toml.</p><p>Alibaba Cloud OSS <code>AKSK</code> environment variables as follows:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// ALIBABA_CLOUD_ACCESS_KEY defines </span><span class="token function" style="color:#d73a49">env</span><span class="token plain"> variable name </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> OSS access key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">ALIBABA_CLOUD_ACCESS_KEY</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;your_access_key&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ALIBABA_CLOUD_SECRET_KEY defines </span><span class="token function" style="color:#d73a49">env</span><span class="token plain"> variable name </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> OSS secret key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">ALIBABA_CLOUD_SECRET_KEY</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;your_secret_key&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ALIBABA_CLOUD_SESSION_TOKEN defines </span><span class="token function" style="color:#d73a49">env</span><span class="token plain"> variable name </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> OSS session token, this is optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">ALIBABA_CLOUD_SESSION_TOKEN</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;your_session_token&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ALIBABA_CLOUD_OSS_REGION defines </span><span class="token function" style="color:#d73a49">env</span><span class="token plain"> variable name </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> OSS region</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">ALIBABA_CLOUD_OSS_REGION</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;oss_region&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Alibaba Cloud OSS <code>SA</code> environment variables as follows:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// ALIBABA_CLOUD_ROLE_ARN defines </span><span class="token function" style="color:#d73a49">env</span><span class="token plain"> variable </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> OSS role arnv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">ALIBABA_CLOUD_ROLE_ARN</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;your_role_arn&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ALIBABA_CLOUD_OIDC_TOKEN_FILE defines </span><span class="token function" style="color:#d73a49">env</span><span class="token plain"> variable name </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> OSS oidc token </span><span class="token function" style="color:#d73a49">file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">ALIBABA_CLOUD_OIDC_TOKEN_FILE</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;your_oidc_token_file&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ALIBABA_CLOUD_OIDC_PROVIDER_ARN defines </span><span class="token function" style="color:#d73a49">env</span><span class="token plain"> variable </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> OSS oidc provider arn</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">ALIBABA_CLOUD_OIDC_PROVIDER_ARN</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;your_oidc_provider_arn&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="backblaze-b2">Backblaze B2<a class="hash-link" href="#backblaze-b2" title="Direct link to heading">​</a></h3><p>To use Backblaze B2 as a storage system for Greenfield SP, you need to create <a href="https://www.backblaze.com/docs/cloud-storage-application-keys" target="_blank" rel="noopener noreferrer">application key</a> firstly. Application Key ID and Application Key respectively corresponds to Access Key and Secret Key. If you use Backblaze B2 as the underlying storage, you can set <code>Storage = b2</code> in config.toml.</p><p>Backblaze B2 <code>AKSK</code> environment variables as follows:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// B2_ACCESS_KEY defines </span><span class="token function" style="color:#d73a49">env</span><span class="token plain"> variable name </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> b2 access key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">B2_ACCESS_KEY</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;your_access_key&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// B2_SECRET_KEY defines </span><span class="token function" style="color:#d73a49">env</span><span class="token plain"> variable name </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> b2 secret key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">B2_SECRET_KEY</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;your_secret_key&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// B2_SESSION_TOKEN defines </span><span class="token function" style="color:#d73a49">env</span><span class="token plain"> variable name </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> b2 session token</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">B2_SESSION_TOKEN</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;your_session_token&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="minio">MinIO<a class="hash-link" href="#minio" title="Direct link to heading">​</a></h3><p><a href="https://min.io/" target="_blank" rel="noopener noreferrer">MinIO</a> is a high-performance, S3 compatible object store. You can visit the official website to learn how to deploy and maintain a MinIO cluster or you can purchase minio service. If you use MinIO as the underlying storage, you can set <code>Storage = minio</code> in config.toml.</p><p>MinIO <code>AKSK</code> environment variables as follows:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// MINIO_REGION defines </span><span class="token function" style="color:#d73a49">env</span><span class="token plain"> variable name </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> minio region</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">MINIO_REGION</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;minio_region&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// MINIO_ACCESS_KEY defines </span><span class="token function" style="color:#d73a49">env</span><span class="token plain"> variable name </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> minio access key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">MINIO_ACCESS_KEY</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;your_access_key&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// MINIO_SECRET_KEY defines </span><span class="token function" style="color:#d73a49">env</span><span class="token plain"> variable name </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> minio secret key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">MINIO_SECRET_KEY</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;your_secret_key&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// MINIO_SESSION_TOKEN defines </span><span class="token function" style="color:#d73a49">env</span><span class="token plain"> variable name </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> minio session token, this is optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">MINIO_SESSION_TOKEN</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;your_session_token&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="file">File<a class="hash-link" href="#file" title="Direct link to heading">​</a></h3><p>When running Greenfield SP in your local machine, you can use local disk to test SP basic functions. The default storage path for root user is <code>/var/piecestore</code> and <code>~/.piecestore/local</code> for ordinary users in Linux and macOS. In Windows system, the default path is <code>C:/piecestore/local</code>.</p><p>Local storage is usually only used to help users understand how Greenfield SP works and to give users an experience on the basic features of Greenfield SP. The created PieceStore storage can only be used on a single machine. This is not recommended in production environment.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="memory">Memory<a class="hash-link" href="#memory" title="Direct link to heading">​</a></h3><p>Memory type can be used to test all PieceStore interfaces in memory. It&#x27;s convenient for unit test or e2e test.</p></div></div></div><div class="col col--12"><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/bnb-chain/greenfield-docs/blob/main/docs/guide/storage-provider/run-book/piece-store.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></div></article><div class="col col--12"><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/greenfield-docs/docs/guide/storage-provider/run-book/join-SP-network"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Join Greenfield SP Network</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/greenfield-docs/docs/guide/storage-provider/run-book/config"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">SP Config</div></a></nav></div></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#piecestore-config" class="table-of-contents__link toc-highlight">PieceStore Config</a></li><li><a href="#shards" class="table-of-contents__link toc-highlight">Shards</a></li><li><a href="#iamtype" class="table-of-contents__link toc-highlight">IAMType</a><ul><li><a href="#aksk" class="table-of-contents__link toc-highlight">AKSK</a></li><li><a href="#sa" class="table-of-contents__link toc-highlight">SA</a></li></ul></li><li><a href="#supported-storage-type" class="table-of-contents__link toc-highlight">Supported Storage Type</a><ul><li><a href="#amazon-s3" class="table-of-contents__link toc-highlight">Amazon S3</a></li><li><a href="#alibaba-cloud-oss" class="table-of-contents__link toc-highlight">Alibaba Cloud OSS</a></li><li><a href="#backblaze-b2" class="table-of-contents__link toc-highlight">Backblaze B2</a></li><li><a href="#minio" class="table-of-contents__link toc-highlight">MinIO</a></li><li><a href="#file" class="table-of-contents__link toc-highlight">File</a></li><li><a href="#memory" class="table-of-contents__link toc-highlight">Memory</a></li></ul></li></ul></div></div></div></div></main></div></div></div>
<script src="/greenfield-docs/assets/js/runtime~main.32796be0.js"></script>
<script src="/greenfield-docs/assets/js/main.42297291.js"></script>
</body>
</html>